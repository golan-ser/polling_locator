<script>
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition, showError);
        } else {
            alert("המכשיר שלך לא תומך בשירותי מיקום");
        }
    }

    function showPosition(position) {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;

        // יצירת קישורים ל-Google Maps ול-Waze
        const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${lat},${lon}`;
        const wazeUrl = `https://waze.com/ul?ll=${lat},${lon}&navigate=yes`;

        // הצגת הקישורים על המסך
        document.getElementById("result").innerHTML = `
            <p>המיקום שלך זוהה בהצלחה!</p>
            <a href="${googleMapsUrl}" target="_blank" class="btn btn-success">פתח ב-Google Maps</a>
            <a href="${wazeUrl}" target="_blank" class="btn btn-primary">פתח ב-Waze</a>
        `;
    }

    function showError(error) {
        let message = "";
        switch (error.code) {
            case error.PERMISSION_DENIED:
                message = "יש לאפשר גישה למיקום כדי למצוא את הקלפי הקרובה.";
                break;
            case error.POSITION_UNAVAILABLE:
                message = "לא ניתן לאתר את המיקום שלך.";
                break;
            case error.TIMEOUT:
                message = "זמן הבקשה לאיתור מיקום נגמר.";
                break;
            case error.UNKNOWN_ERROR:
                message = "שגיאה בלתי ידועה.";
                break;
        }
        alert(message);
    }
</script>
